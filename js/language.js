// Multi-language configuration for Siiksong
const translations = {
    en: {
        // Navigation
        home: "Home",
        guides: "Guides",
        map: "Map",
        community: "Community",
        gameInfo: "Game Info",
        faq: "FAQ",
        news: "News",
        features: "Features",
        lore: "Lore",
        creations: "Creations",
        shop: "Shop",
        
        // Homepage content
        heroTitle: "Master Pharloom",
        heroSubtitle: "Your ultimate companion for Hollow Knight: Silksong - Expert guides, interactive maps, and community support",
        startJourney: "Start Your Journey",
        joinCommunity: "Join Community",
        
        // Statistics
        playersHelped: "Players Helped",
        expertGuides: "Expert Guides",
        communityMembers: "Community Members",
        successRate: "Success Rate",
        
        // Feature cards
        bossGuides: "Boss Guides",
        bossGuidesDesc: "Step-by-step strategies for every boss in Pharloom. From Lace to the final encounter, master every fight.",
        interactiveMap: "Interactive Map",
        interactiveMapDesc: "Discover every secret, collectible, and hidden area in Pharloom with our detailed interactive map.",
        buildCalculator: "Build Calculator",
        buildCalculatorDesc: "Optimize your Crest and Mana combinations for maximum effectiveness in combat and exploration.",
        speedrunRoutes: "Speedrun Routes",
        speedrunRoutesDesc: "Learn the fastest paths through Pharloom with detailed speedrun strategies and time-saving tips.",
        modsTools: "Mods & Tools",
        modsToolsDesc: "Enhance your Silksong experience with curated mods, custom skins, and gameplay modifications.",
        loreTheories: "Lore & Theories",
        loreTheoriesDesc: "Dive deep into Pharloom's mysteries with community theories, character analysis, and story insights.",
        
        // Buttons
        explore: "Explore",
        try: "Try",
        view: "View",
        browse: "Browse",
        read: "Read",
        
        // Search
        searchPlaceholder: "Search guides, bosses, tips...",
        
        // Footer
        about: "About",
        contact: "Contact",
        
        // News Center
        newsCenter: "News Center",
        newsSubtitle: "Get the latest news, official announcements and media coverage for Hollow Knight: Silksong",
        officialAnnouncements: "Official Announcements",
        developerLogs: "Developer Logs",
        mediaCoverage: "Media Coverage",
        eventsShows: "Events & Shows",
        featuredNews: "Featured News",
        loadMoreNews: "Load More News",
        readMore: "Read More",
        
        // Guides
        guidesTitle: "Guides & Walkthroughs",
        guidesSubtitle: "Master every detail of Hollow Knight: Silksong, from beginner to expert",
        bossStrategies: "Boss Strategies",
        mapAnalysis: "Map Analysis",
        collectiblesGuide: "Collectibles Guide",
        characterBuilds: "Character Builds",
        easy: "Easy",
        medium: "Medium",
        hard: "Hard",
        readFullGuide: "Read Full Guide",
        watchVideo: "Watch Video",
        
        // Lore
        loreTitle: "Lore & Background Analysis",
        loreSubtitle: "Deep dive into the story, world-building and character relationships of Hollow Knight: Silksong",
        worldAnalysis: "World Analysis",
        characterAnalysis: "Character Analysis",
        storyAnalysis: "Story Analysis",
        communityTheories: "Community Theories",
        featuredTheory: "Featured Theory",
        hotTheories: "Hot Community Theories",
        
        // Creations
        creationsTitle: "Fan Creations",
        creationsSubtitle: "Showcase amazing fan works inspired by Hollow Knight: Silksong",
        artwork: "Artwork",
        cosplay: "Cosplay",
        fiction: "Fan Fiction",
        music: "Music",
        monthlyContest: "Monthly Creation Contest",
        shareYourWork: "Share Your Work",
        submitWork: "Submit Work",
        
        // Shop
        shopTitle: "Merchandise Store",
        shopSubtitle: "Official Hollow Knight: Silksong merchandise to support the community",
        allProducts: "All Products",
        clothing: "Clothing",
        figures: "Figures",
        accessories: "Accessories",
        digital: "Digital",
        featuredProducts: "Featured Products",
        addToCart: "Add to Cart",
        viewDetails: "View Details",
        
        // Common
        loading: "Loading...",
        error: "Error",
        success: "Success",
        cancel: "Cancel",
        confirm: "Confirm",
        save: "Save",
        edit: "Edit",
        delete: "Delete",
        share: "Share",
        like: "Like",
        comment: "Comment"
    },
    
    es: {
        // Navegación
        home: "Inicio",
        guides: "Guías",
        map: "Mapa",
        community: "Comunidad",
        gameInfo: "Info del Juego",
        faq: "Preguntas",
        news: "Noticias",
        features: "Características",
        lore: "Historia",
        creations: "Creaciones",
        shop: "Tienda",
        
        // Contenido de la página principal
        heroTitle: "Domina Pharloom",
        heroSubtitle: "Tu compañero definitivo para Hollow Knight: Silksong - Guías expertas, mapas interactivos y soporte comunitario",
        startJourney: "Inicia tu Aventura",
        joinCommunity: "Únete a la Comunidad",
        
        // Estadísticas
        playersHelped: "Jugadores Ayudados",
        expertGuides: "Guías Expertas",
        communityMembers: "Miembros de la Comunidad",
        successRate: "Tasa de Éxito",
        
        // Tarjetas de características
        bossGuides: "Guías de Jefes",
        bossGuidesDesc: "Estrategias paso a paso para cada jefe en Pharloom. Desde Lace hasta el encuentro final, domina cada pelea.",
        interactiveMap: "Mapa Interactivo",
        interactiveMapDesc: "Descubre cada secreto, coleccionable y área oculta en Pharloom con nuestro mapa interactivo detallado.",
        buildCalculator: "Calculadora de Builds",
        buildCalculatorDesc: "Optimiza tus combinaciones de Crest y Mana para máxima efectividad en combate y exploración.",
        speedrunRoutes: "Rutas de Speedrun",
        speedrunRoutesDesc: "Aprende los caminos más rápidos a través de Pharloom con estrategias detalladas de speedrun y consejos para ahorrar tiempo.",
        modsTools: "Mods y Herramientas",
        modsToolsDesc: "Mejora tu experiencia de Silksong con mods curados, skins personalizadas y modificaciones de jugabilidad.",
        loreTheories: "Historia y Teorías",
        loreTheoriesDesc: "Sumérgete en los misterios de Pharloom con teorías de la comunidad, análisis de personajes y perspectivas de la historia.",
        
        // Botones
        explore: "Explorar",
        try: "Probar",
        view: "Ver",
        browse: "Navegar",
        read: "Leer",
        
        // Búsqueda
        searchPlaceholder: "Buscar guías, jefes, consejos...",
        
        // Pie de página
        about: "Acerca de",
        contact: "Contacto",
        
        // Centro de Noticias
        newsCenter: "Centro de Noticias",
        newsSubtitle: "Obtén las últimas noticias, anuncios oficiales y cobertura mediática de Hollow Knight: Silksong",
        officialAnnouncements: "Anuncios Oficiales",
        developerLogs: "Registros de Desarrolladores",
        mediaCoverage: "Cobertura Mediática",
        eventsShows: "Eventos y Shows",
        featuredNews: "Noticias Destacadas",
        loadMoreNews: "Cargar Más Noticias",
        readMore: "Leer Más",
        
        // Guías
        guidesTitle: "Guías y Walkthroughs",
        guidesSubtitle: "Domina cada detalle de Hollow Knight: Silksong, desde principiante hasta experto",
        bossStrategies: "Estrategias de Jefes",
        mapAnalysis: "Análisis de Mapas",
        collectiblesGuide: "Guía de Coleccionables",
        characterBuilds: "Builds de Personajes",
        easy: "Fácil",
        medium: "Medio",
        hard: "Difícil",
        readFullGuide: "Leer Guía Completa",
        watchVideo: "Ver Video",
        
        // Historia
        loreTitle: "Análisis de Historia y Trasfondo",
        loreSubtitle: "Profundiza en la historia, construcción del mundo y relaciones de personajes de Hollow Knight: Silksong",
        worldAnalysis: "Análisis del Mundo",
        characterAnalysis: "Análisis de Personajes",
        storyAnalysis: "Análisis de la Historia",
        communityTheories: "Teorías de la Comunidad",
        featuredTheory: "Teoría Destacada",
        hotTheories: "Teorías Populares de la Comunidad",
        
        // Creaciones
        creationsTitle: "Creaciones de Fans",
        creationsSubtitle: "Muestra increíbles trabajos de fans inspirados en Hollow Knight: Silksong",
        artwork: "Arte",
        cosplay: "Cosplay",
        fiction: "Ficción de Fans",
        music: "Música",
        monthlyContest: "Concurso Mensual de Creaciones",
        shareYourWork: "Comparte tu Trabajo",
        submitWork: "Enviar Trabajo",
        
        // Tienda
        shopTitle: "Tienda de Merchandise",
        shopSubtitle: "Merchandise oficial de Hollow Knight: Silksong para apoyar a la comunidad",
        allProducts: "Todos los Productos",
        clothing: "Ropa",
        figures: "Figuras",
        accessories: "Accesorios",
        digital: "Digital",
        featuredProducts: "Productos Destacados",
        addToCart: "Agregar al Carrito",
        viewDetails: "Ver Detalles",
        
        // Común
        loading: "Cargando...",
        error: "Error",
        success: "Éxito",
        cancel: "Cancelar",
        confirm: "Confirmar",
        save: "Guardar",
        edit: "Editar",
        delete: "Eliminar",
        share: "Compartir",
        like: "Me Gusta",
        comment: "Comentar"
    }
};

// Language switching functionality
function changeLanguage(lang) {
    // Save language preference
    localStorage.setItem('selectedLanguage', lang);
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update page title and meta description
    updatePageMeta(lang);
    
    // Update all translatable elements
    updateTranslatableElements(lang);
    
    // Update language selector
    updateLanguageSelector(lang);
    
    console.log(`Language changed to: ${lang}`);
}

// Update page meta information
function updatePageMeta(lang) {
    const translations_data = translations[lang];
    
    // Update title based on current page
    const currentPage = getCurrentPage();
    if (currentPage && translations_data[currentPage + 'Title']) {
        document.title = translations_data[currentPage + 'Title'] + ' - Siiksong';
    }
    
    // Update meta description
    const metaDescription = document.querySelector('meta[name="description"]');
    if (metaDescription && translations_data[currentPage + 'Subtitle']) {
        metaDescription.setAttribute('content', translations_data[currentPage + 'Subtitle']);
    }
}

// Update all translatable elements
function updateTranslatableElements(lang) {
    const translations_data = translations[lang];
    
    // Update elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations_data[key]) {
            element.textContent = translations_data[key];
        }
    });
    
    // Update placeholder texts
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations_data[key]) {
            element.placeholder = translations_data[key];
        }
    });
    
    // Update alt texts
    document.querySelectorAll('[data-translate-alt]').forEach(element => {
        const key = element.getAttribute('data-translate-alt');
        if (translations_data[key]) {
            element.alt = translations_data[key];
        }
    });
}

// Update language selector
function updateLanguageSelector(lang) {
    const selector = document.getElementById('languageSelector');
    if (selector) {
        selector.value = lang;
    }
}

// Get current page identifier
function getCurrentPage() {
    const path = window.location.pathname;
    const filename = path.split('/').pop().split('.')[0];
    
    // Map filenames to page identifiers
    const pageMap = {
        'index': 'home',
        'news-center': 'newsCenter',
        'guides': 'guides',
        'lore': 'lore',
        'creations': 'creations',
        'shop': 'shop',
        'about': 'about',
        'auth': 'auth',
        'profile': 'profile',
        'favorites': 'favorites'
    };
    
    return pageMap[filename] || 'home';
}

// Initialize language on page load
function initializeLanguage() {
    // Get saved language preference or default to English
    const savedLang = localStorage.getItem('selectedLanguage') || 'en';
    
    // Change to saved language
    changeLanguage(savedLang);
}

// Load language when DOM is ready
document.addEventListener('DOMContentLoaded', initializeLanguage);

// Export for use in other scripts
window.SiiksongTranslations = translations;
window.changeLanguage = changeLanguage;